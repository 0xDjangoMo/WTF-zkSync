---
title: 3. 账户抽象（AA）
tags:
  - zksync
  - AA
---

# WTF zkSync极简入门: 3. 账户抽象（AA）

这一讲，我们将深入探讨 zkSync 中实现的账户抽象（AA）特性。

## 1. 账户抽象

账户抽象（Account Abstraction，AA）是一种将用户账户的操作和特性从底层区块链平台的具体实现中分离出来的设计思想。通过这种方式，用户和开发者可以以更加简便、直观的方式与区块链互动，同时能够享受到定制化服务和更用户友好的操作。

### 1.1 账户分类

传统的以太坊网络中，主要存在两类账户：

- **外部拥有账户（EOA）**：由私钥控制，可以直接发起交易。
- **合约账户**：由部署在区块链上的智能合约代码控制，能够执行更复杂的操作。

尽管这两类账户都能持有和转移资产，它们的功能和限制各不相同。下面是它们的对比。

**EOA**：

- 免费创建。
- 能够直接发起交易。
- 主要进行ETH和代币转移。
- 由一对密钥控制。

**合约账户**：

- 部署需消耗gas。
- 仅在接收到交易时能发起交易。
- 可以执行多样化的逻辑，如多签钱包。
- 无私钥，完全由代码逻辑控制。

### 1.2 账户抽象化的优势

账户抽象化将EOA和合约账户的特性统一，允许账户既能自主发起交易，又能承载复杂的逻辑。这极大地扩展了区块链账户的应用范围，使得例如智能合约钱包等应用成为可能，同时简化了用户的操作流程。

## 2. zkSync 中的账户抽象化实现

zkSync 通过提供一个统一的账户模型来实现账户抽象化，该模型结合了EOA和合约账户的特点。

- **发送交易**：zkSync上的合约账户可以像EOA一样直接发起交易。
- **可编程性**：同时，它们还拥有合约账户的可编程性，能够在账户内实现复杂逻辑。

这种融合使得zkSync账户不仅具备高效率和灵活性，还能提供更好的用户体验和安全性。

### 2.1 主要特性

- **签名抽象（Signature Abstraction）**：允许使用多种签名方案，为用户提供更广泛的安全选项。
- **支付抽象（Payment Abstraction）**：支持多种支付方式，如使用ERC-20代币支付交易费用，或第三方支付交易费用。

## 3. zkSync 账户抽象化的应用

### 3.1 简化交易流程

zkSync 的账户抽象化简化了交易流程，用户可以更容易地与智能合约交互，无需担心底层的复杂性。

### 3.2 定制化服务

开发者可以为用户提供定制化服务，如自动交易、资产管理策略等，提升了应用的灵活性和功能性。

### 3.3 增强的安全性

通过支持多种签名方案和支付方式，账户抽象化为用户和应用提供了更强的安全性和更多样的交易支付选项。这不仅使得交易过程更加安全，还能够根据用户的特定需求提供更加灵活的支付解决方案。

## 3.4 探索新的应用场景

账户抽象化为区块链应用开发开辟了新的可能性，比如：

- **智能合约钱包**：结合用户友好的操作界面和后台的智能合约逻辑，提供更智能的资产管理和保护策略。
- **去中心化金融（DeFi）应用**：用户可以直接从其账户中执行复杂的金融操作，如借贷、杠杆交易等，无需转移到外部合约。
- **自动化支付和订阅**：定制智能合约以自动执行定期支付，支持订阅服务和定期费用支付，无需用户手动介入。
- **多签名和安全控制**：实现更复杂的访问和控制逻辑，如多签名验证，为企业和团队管理提供更高级的安全措施。

## 4. Paymaster：zkSync 中的支付中继

在 zkSync 的账户抽象化框架内，`Paymaster` 起着中心角色，使得交易发起者可以通过第三方支付交易费用，或使用非原生代币（如ERC-20代币）支付费用。

### 4.1 Paymaster 的工作原理

- 用户发起交易时，可以指定一个`Paymaster`合约来负责支付交易费用。
- `Paymaster`合约在接到支付请求后，会根据内部逻辑验证请求的有效性，并决定是否支付交易费用。
- 如果`Paymaster`同意支付，它会向网络支付所需的费用，使用户交易得以执行。

### 4.2 Paymaster 的应用场景

- **用户免费交易**：对于希望吸引用户参与的应用，可以通过`Paymaster`支付用户交易费用，降低用户参与门槛。
- **代币支付交易费**：用户可以使用特定的代币支付交易费，而`Paymaster`负责将这些代币转换成网络接受的费用形式。
- **企业和应用赞助**：企业或应用开发者可以作为`Paymaster`，为其用户群体支付交易费用，提升用户体验。

## 结语

账户抽象化是 zkSync 提供的一项创新特性，它极大地提升了用户体验，简化了交易流程，并为开发者打造复杂、安全且用户友好的区块链应用提供了强大的工具。通过探索`Paymaster`和账户抽象化的各种应用，zkSync 正在推动区块链技术的边界，开拓去中心化世界的新未来。